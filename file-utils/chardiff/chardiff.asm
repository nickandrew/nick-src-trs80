;Chardiff: Report character by character differences.
;
*GET	DOSCALLS
	ORG	5300H
START	LD	SP,START
	LD	DE,FCB_I1
	CALL	DOS_EXTRACT
	LD	DE,FCB_I2
	CALL	DOS_EXTRACT
	LD	HL,BUF_I1
	LD	DE,FCB_I1
	LD	B,0
	CALL	DOS_OPEN_EX
	JP	NZ,DOS_ERROR
;
	LD	HL,BUF_I2
	LD	DE,FCB_I2
	LD	B,0
	CALL	DOS_OPEN_EX
	JP	NZ,DOS_ERROR
;
LOOP	LD	DE,FCB_I1
	CALL	13H
	JR	NZ,END_OF_FILE
	LD	B,A
	PUSH	BC
	LD	DE,FCB_I2
	CALL	13H
	JR	NZ,END_OF_FILE
	POP	BC
	CP	B
	JR	Z,LOOP
	PUSH	BC
	PUSH	AF
	LD	A,'{'
	CALL	ROM@PUT_VDU
	POP	AF
	CALL	ROM@PUT_VDU
	POP	BC
	LD	A,B
	CALL	ROM@PUT_VDU
	LD	A,'}'
	CALL	ROM@PUT_VDU
	JR	LOOP
;
;
END_OF_FILE
	LD	DE,FCB_I1
	CALL	DOS_CLOSE
	JP	NZ,DOS_ERROR
	LD	DE,FCB_I2
	CALL	DOS_CLOSE
	JP	NZ,DOS_ERROR
	JP	DOS_NOERROR
;
FCB_I1	DEFS	32
FCB_I2	DEFS	32
BUF_I1	DEFS	256
BUF_I2	DEFS	256
;
	END	START
