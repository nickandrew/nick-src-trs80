;trk: ???
; Assembled OK 30-Mar-85.

*GET	DOSCALLS

	ORG	8000H
START	DI
	LD	HL,9000H
	LD	DE,9001H
	LD	BC,6000H
	LD	(HL),0
	LDIR
	LD	SP,0FFFDH
	LD	A,1
	LD	(37E1H),A
	LD	HL,37ECH
	LD	(HL),3
	LD	BC,4000H
	CALL	60H
LOOP2	BIT	0,(HL)
	JR	NZ,LOOP2
LOOP	CALL	INSSCE
	LD	A,41H
	LD	(3C00H),A
	LD	BC,9000H
	CALL	READ
	JP	75H
	LD	B,1
LOOP3	CALL	STOUT
	DJNZ	LOOP3
	CALL	INSDES
	LD	A,41H
	LD	(3C02H),A
	LD	BC,9000H
	CALL	WRITE
	LD	A,30H
	LD	(3C02H),A
	LD	BC,0A000H
	CALL	WRITE
	LD	A,31H
	LD	(3C02H),A
	LD	BC,0B000H
	CALL	WRITE
	LD	A,32H
	LD	(3C02H),A
	LD	BC,0C000H
	CALL	WRITE
	LD	A,33H
	LD	(3C02H),A
	LD	BC,0D000H
	CALL	WRITE
	LD	A,34H
	LD	(3C02H),A
	JP	LOOP
INSSCE	LD	HL,SMES
	JP	WTINP
SMES	DEFM	'INSERT <SOURCE> DISK AND HIT RETURN:'
	DEFB	0DH
DMES	DEFM	'INSERT <DESTINATION> DISK AND HIT RETURN:'
	DEFB	0DH
INSDES	LD	HL,DMES
WTINP	LD	A,(HL)
	CALL	ROM@PUT_VDU
	INC	HL
	CP	0DH
	JR	NZ,WTINP
LOOP4	LD	A,(38FFH)
	OR	A
	JR	NZ,LOOP4
LOOP5	LD	A,(3840H)
	AND	1
	JR	Z,LOOP5
	LD	A,0DH
	CALL	ROM@PUT_VDU
	LD	A,1
	LD	(37E1H),A
	LD	BC,4000H
	CALL	0060H
	RET
STOUT	PUSH	BC
	LD	A,1
	LD	(37E1H),A
	LD	A,60H
	LD	(37ECH),A
	LD	B,6
	DJNZ	$
LOOP6	LD	A,(37ECH)
	BIT	0,A
	JR	NZ,LOOP6
	POP	BC
	RET
READ	LD	A,1
	PUSH	BC
	LD	(37E1H),A
	LD	A,0E4H
	LD	(37ECH),A
	LD	B,6
	DJNZ	$
	POP	BC
TEST1	LD	A,(37ECH)
	BIT	0,A
	JR	Z,GOUT
	BIT	1,A
	JR	Z,TEST1
	LD	A,(37EFH)
	LD	(BC),A
	INC	BC
	JR	TEST1
GOUT	LD	A,0FFH
	LD	(BC),A
	INC	BC
	LD	(BC),A
	LD	B,6
	DJNZ	$
	LD	A,1
	LD	(37E1H),A
	LD	A,40H
	LD	(37ECH),A
	LD	B,6
	DJNZ	$
LOOP8	LD	A,(37ECH)
	BIT	0,A
	JR	NZ,LOOP8
	RET
WRITE	LD	A,1
	PUSH	BC
	LD	(37E1H),A
	LD	A,0F4H
	LD	(37ECH),A
	LD	B,6
	DJNZ	$
	POP	BC
	LD	HL,37ECH
TEST2	BIT	0,(HL)
	JR	Z,GOUT2
	BIT	1,(HL)
	JR	Z,TEST2
	LD	A,(BC)
	LD	(37EFH),A
	INC	BC
	JR	TEST2
GOUT2	LD	A,0FFH
	LD	(BC),A
	INC	BC
	LD	(BC),A
	LD	B,6
	DJNZ	$
	LD	A,1
	LD	(37E1H),A
	LD	A,40H
	LD	(37ECH),A
	LD	B,6
	DJNZ	$
LOOP10	LD	A,(37ECH)
	BIT	0,A
	JR	NZ,LOOP10
	RET
	END	START
