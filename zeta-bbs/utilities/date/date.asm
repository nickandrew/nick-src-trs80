;date.asm: print date and time.
;
*GET	DOSCALLS
*GET	EXTERNAL
*GET	ASCII
;
	ORG	PROG_START
	DEFW	BASE
	DEFW	THIS_PROG_END
	DEFW	TERMINATE
	DEFW	TERMINATE
;End of program load info.
;
	COM	'<Date 1.1a 09-Aug-87>'
	ORG	BASE+100H
START
	LD	SP,START
	LD	A,(HL)
	CP	CR
	JR	Z,DATE
	LD	HL,M_USAGE
	LD	DE,DCB_2O
	CALL	MESS_0
	LD	A,0
	JP	TERMINATE
;
DATE	LD	HL,DATE_BUFF
	CALL	X_TODAY
	LD	HL,TIME_BUFF
	CALL	446DH		;convert time.
	LD	HL,DATE_STRING
	LD	DE,DCB_2O
	CALL	MESS_0
	LD	A,0
	JP	TERMINATE
;
*GET	ROUTINES
;
DATE_STRING
DATE_BUFF
	DEFM	'DD-MMM-YY'
	DEFM	'  '
TIME_BUFF
	DEFM	'HH:MM:SS',CR,0
;
M_USAGE
	DEFM	'Usage: date',CR,0
;
THIS_PROG_END	EQU	$
;
	END	START
