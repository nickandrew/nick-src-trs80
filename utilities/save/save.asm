;*********************************************************
;*      SAVE VERSION 1.3 (C) 25/4/82 BY NICK ANDREW.     *
;*********************************************************
	ORG	0
	DEFB	0
	ORG	0FFFDH
	DEFB	0
START	EQU	3C00H
_END	EQU	4FA1H
JUMP	EQU	41FDH
	ORG	_END+80
SAVE	LD	A,(3840H)
	OR	A
	JR	Z,SAVE
	LD	HL,MESAGE
	LD	DE,15360+128+5
LOOPIT	LD	A,(HL)
	OR	A
	JR	Z,GOSAVE
	LD	(DE),A
	INC	HL
	INC	DE
	JR	LOOPIT
GOSAVE	LD	HL,_END+1
	LD	A,(16445)
	LD	(HL),A
	INC	HL
	LD	A,(16607)
	LD	(HL),A
	INC	HL
	LD	A,(16608)
	LD	(HL),A
	INC	HL
	LD	A,(16866)
	LD	(HL),A
	INC	HL
	LD	A,(16867)
	LD	(HL),A
	INC	HL
	LD	A,(16868)
	LD	(HL),A
	INC	HL
	EX	DE,HL
	LD	HL,4260H
	LD	BC,40
	LDIR
	PUSH	DE
	LD	HL,DUMMY
	LD	BC,49
	LDIR
	XOR	A
	LD	(16445),A
	POP	HL
	LD	(16867),HL
	LD	A,195
	LD	(16866),A
	PUSH	DE
	LD	HL,4260H
	PUSH	HL
	POP	DE
	INC	DE
	LD	(HL),0
	LD	BC,39
	LDIR
	XOR	A
	CALL	0212H
	CALL	0287H
	LD	A,55H
	CALL	0264H
	LD	HL,NAME
	LD	B,6
LOOP1	LD	A,(HL)
	INC	HL
	CALL	0264H
	DJNZ	LOOP1
	LD	HL,START
	LD	BC,0
	POP	DE
	INC	DE
BLOCK	PUSH	HL
	PUSH	DE
	EX	DE,HL
	OR	A
	SBC	HL,DE
	EX	DE,HL
	LD	A,D
	OR	E
	JR	Z,FINISH
	LD	A,3CH
	CALL	0264H
	LD	B,E
	LD	A,B
	CALL	0264H
	POP	DE
	POP	HL
	LD	A,L
	CALL	0264H
	LD	A,H
	CALL	0264H
	ADD	A,L
	LD	C,A
LOOP2	LD	A,(HL)
	INC	HL
	CALL	0264H
	ADD	A,C
	LD	C,A
	DJNZ	LOOP2
	LD	A,C
	LD	C,0
	CALL	0264H
	JR	BLOCK
FINISH	POP	DE
	POP	HL
	LD	A,78H
	CALL	0264H
	LD	A,(TRANS)
	CALL	0264H
	LD	A,(TRANS+1)
	CALL	0264H
	CALL	01F8H
	JP	0
DUMMY	LD	HL,_END+1
	LD	A,(HL)
	LD	(16445),A
	INC	HL
	LD	A,(HL)
	LD	(16607),A
	INC	HL
	LD	A,(HL)
	LD	(16608),A
	INC	HL
	LD	A,(HL)
	LD	(16866),A
	INC	HL
	LD	A,(HL)
	LD	(16867),A
	INC	HL
	LD	A,(HL)
	LD	(16868),A
	INC	HL
	LD	DE,4260H
	LD	BC,40
	LDIR
	LD	SP,5000H
	JP	JUMP
	NOP
	NOP
	NOP
NAME	DEFM	'CHESS '
TRANS	DEFW	0676H
MESAGE	DEFM	'---> COPIED BY NICK ANDREW, 25/4/82.'
	DEFB	0
	END	06CCH
