	ORG	8CE9H
	JP	KEYBD
	ORG	0C000H
KEYBD	LD	A,(3820H)
	RLA
	JP	C,4CC3H	;BRAKES
	RLA
	JP	C,4C95H	;INCREASE THROTTLE
	RLA
	RLA
	JP	C,4CA1H	;DECREASE THROTTLE
	LD	A,(3801H)
	AND	2
	JP	NZ,4CADH
	LD	A,(3804H)
	AND	2
	JP	NZ,4CB6H
	LD	A,(3840H)
	LD	H,A
	AND	60H
	JR	NZ,BYPASS
	XOR	A
	LD	(4570H),A
BYPASS	LD	A,H
	RLA
	JP	C,5843H	;FIRE MACHINE GUN
	RLA
	PUSH	AF
	CALL	C,4CDBH	;RIGHT RUDDER & AILERONS
	POP	AF
	RLA
	PUSH	AF
	CALL	C,4D1FH	;LEFT RUDDER & AILERONS
	POP	AF
	RLA
	PUSH	AF
	CALL	C,4D3FH	;ELEVATORS UP
	POP	AF
	RLA
	PUSH	AF
	CALL	C,4D57H	;ELEVATORS DOWN
	POP	AF
	RLA
	PUSH	AF
	CALL	C,736DH
	POP	AF
	RLA
	PUSH	AF
	CALL	C,7373H
	POP	AF
	XOR	A	;CLEAR FOR KBD ROUTINE.
	JP	4CF8H	;NORMAL KEYBOARD ROUTINE.
	END	0BE00H
